#include <REGX52.H>

void Timer0_Init()
{
//	AUXR |= 0x80;	//stc89c52没有寄存器设置定时器时钟1T模式，所以这句不加，但是STC_ISP自动生成的带上了这句
//	TMOD = 0x01; //0000 0001 不需要反过来
	TMOD &= 0xF0; //上面的赋值会改变其他定时器设置，所以进行改进
	TMOD |= 0x01;
	TF0 = 0; //清零
	TR0 = 1; //开始计数
//我要1000us后发出中断，需要给计数器赋初值,65535 - 1000 = 64535
	TH0 = 64535 / 256; //因为是两个储存用的寄存器拼起来存数据，所以高低位分开赋值
	TL0 = 64535 % 256 + 1; //初值 / 2^6得到高位，初值 % 2^6得到低位，+1是因为64536才中断
	ET0 = 1; //打开开关
	EA = 1; //打开总开关
	PT0 = 0; //设置优先级
}